# .github/workflows/deploy.yml
name: Deploy React App to GitHub Pages üöÄ

on:
  # –ó–∞–ø—É—Å–∫–∞—Ç–∏ —Ü–µ–π —Ä–æ–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É push –¥–æ –≥—ñ–ª–∫–∏ 'main'
  push:
    branches:
      - main
  # –î–æ–∑–≤–æ–ª–∏—Ç–∏ —Ä—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫ –∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É GitHub
  workflow_dispatch:

jobs:
  build-and-deploy:
    # –ó–∞–ø—É—Å–∫–∞—Ç–∏ –Ω–∞ –æ—Å—Ç–∞–Ω–Ω—ñ–π –≤–µ—Ä—Å—ñ—ó Ubuntu
    runs-on: ubuntu-latest

    steps:
      # 1. Checkout: –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v4
        with:
          # –ü–æ—Ç—Ä—ñ–±–Ω–æ –¥–ª—è –ø–æ–≤–Ω–æ—ó —ñ—Å—Ç–æ—Ä—ñ—ó, —â–æ–± gh-pages –¥—ñ—è –ø—Ä–∞—Ü—é–≤–∞–ª–∞ –∫–æ—Ä–µ–∫—Ç–Ω–æ
          fetch-depth: 0

      # 2. Setup Node.js: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ Node.js
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20" # –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ LTS –≤–µ—Ä—Å—ñ—è
          cache: "npm" # –ö–µ—à—É–≤–∞–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è

      # 3. Install Dependencies: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞–∫–µ—Ç—ñ–≤
      - name: Install dependencies
        run: npm install

      # 4. Build: –ó–±—ñ—Ä–∫–∞ React-–ø—Ä–æ—î–∫—Ç—É
      - name: Build project üèóÔ∏è
        run: npm run build

      # 5. Deploy to GitHub Pages: –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—á–Ω–æ—ó –∑–±—ñ—Ä–∫–∏
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v4
        if: github.ref == 'refs/heads/main' # –†–æ–∑–≥–æ—Ä—Ç–∞—Ç–∏ –ª–∏—à–µ –∑ –≥—ñ–ª–∫–∏ main
        with:
          # –¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø—É, –Ω–∞–¥–∞–Ω–∏–π GitHub –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
          github_token: ${{ secrets.GITHUB_TOKEN }}
          # –î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è, —â–æ –º—ñ—Å—Ç–∏—Ç—å —Å—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏ (—Ç–∏–ø–æ–≤–æ –¥–ª—è Vite)
          publish_dir: ./dist
          # –ì—ñ–ª–∫–∞, –Ω–∞ —è–∫—É –±—É–¥–µ –≤–∏–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ –∑–±—ñ—Ä–∫—É
          publish_branch: gh-pages
